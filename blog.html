<!DOCTYPE html>
<html lang="en" class = "hydrated">
<head>
  <meta  charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name ="viewport" content = "width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <title>QuietShelter Foundation</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <link rel="stylesheet"  href="style.css">
  <link rel="stylesheet"  href="blog.css">
  <link rel="stylesheet"  href="navigation/nav.css">
  
</head>
<body>
  <header>
    <a href="index.html" class="Logo"></a>
    <div class="menu-btn">
      <nav class="navigation">
        <ul class="navigation__list">
          <li class="navigation__item"><a href="index.html" class="navigation__link">Home</a></li>
          <li class="navigation__item"><a href="strategy.html" class="navigation__link">Strategy</a></li>
          <li class="navigation__item"><a href="about.html" class="navigation__link">Our Story</a></li>
          <li class="navigation__item"><a href="donation.html" class="navigation__link">Donation</a></li>
          <li class="navigation__item"><a href="blog.html" class="navigation__link">Blog</a></li>
          <li class="navigation__item"><a href="#blog.html" class="navigation__link">Annual Report</a></li>
        </ul>
      </nav>
      <div class="hamburger" id="hamburger">
        <div class="hamburger__icon"></div>
      </div>

    </div>
    
  </header>

  <section class="update-area" id="update">
    <div class="update-container">
      <h1 class="update-title" id="update">Our News Feeds</h1>
      <p><strong>Our Out-Reach every step of the way</strong></p>
    </div>
  </section>

  <section id="blog">
    <!---heading-->
    <div class="blog-heading">
      <span>Blog Updates </span>
    </div>

    <!---blog container-->
    <div class="blog-container">

      <!---box 1-->
      <div class="blog-box">
      <!---img-->
      <div class="blog-img">
        <img src="images/wyy.jpg" alt="">
      </div>
      <!--text-->
      <div class="blog-text">
        <span>12 May 2021 / Youth Empowerment</span>
        <a href="#blog.html" class="blog-title">Malkohi Women and Youth Empowerment</a>
        <p>
        The primary objective of the Malkohi Women and Youth Empowerment</br> Project is to
        enhance the socio-economic status of women and youth</br> in the Malkohi region by
        providing them with the skills, resources,</br>  and opportunities needed to achieve
        self-sufficiency and contribute positively to their communities.
        </p>
        <a href="#blog.html">Read More</a>  
      </div>

  
    </div>


  </section>
  <!-- In your HTML website -->
  <section id="blog">
    <div class="blog-heading">
        <span>Blog Updates</span>
    </div>
    <div class="blog-container" id="blogContainer">
        <!-- Loading state -->
        <div id="loadingState">Loading blog posts...</div>
    </div>
  </section>

  <script type="module">
    // Import Firebase
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';
    import { 
        getFirestore, 
        collection, 
        query, 
        orderBy, 
        onSnapshot 
    } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';

    // Your Firebase config (same as Next.js admin)
    const firebaseConfig = {
      apiKey: "AIzaSyAB-WbFZTQ8bfHA3W44Q9ithgDGWos1jss",
      authDomain: "quietshelter-b5f54.firebaseapp.com",
      projectId: "quietshelter-b5f54",
      storageBucket: "quietshelter-b5f54.firebasestorage.app",
      messagingSenderId: "964395764892",
      appId: "1:964395764892:web:8cb55955d6f4a92f08f159",
      measurementId: "G-9652RJX9SV"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    function formatDate(dateString) {
        const options = { year: 'numeric', month: 'long', day: 'numeric' };
        return new Date(dateString).toLocaleDateString('en-US', options);
    }

    function truncateText(text, maxLength = 150) {
        return text.length > maxLength ? text.substring(0, maxLength) + '...' : text;
    }

    function createBlogCard(blog) {
        return `
            <div class="blog-box">
                <div class="blog-img">
                    <img src="${blog.imageUrl || 'images/default.jpg'}" alt="${blog.title}">
                </div>
                <div class="blog-text">
                    <span>${formatDate(blog.date)} / ${blog.categories}</span>
                    <a href="blog/${blog.slug}" class="blog-title">${blog.title}</a>
                    <p>${truncateText(blog.content)}</p>
                    <a href="blog/${blog.slug}">Read More</a>
                </div>
            </div>
        `;
    }

    // Real-time blog updates
    function initializeBlogDisplay() {
        const blogContainer = document.getElementById('blogContainer');
        const loadingState = document.getElementById('loadingState');

        // Create query with ordering
        const blogsQuery = query(
            collection(db, 'blogs'),
            orderBy('createdAt', 'desc')
        );

        // Real-time listener
        onSnapshot(blogsQuery, (snapshot) => {
            loadingState.style.display = 'none';
            const blogs = [];
            
            snapshot.forEach((doc) => {
                if (doc.data().isPublished) {
                    blogs.push({
                        id: doc.id,
                        ...doc.data()
                    });
                }
            });

            // Update DOM
            blogContainer.innerHTML = blogs.length > 0 
                ? blogs.map(blog => createBlogCard(blog)).join('')
                : '<p>No blog posts available.</p>';
        }, (error) => {
            console.error("Error fetching blogs:", error);
            blogContainer.innerHTML = `
                <p>Error loading blog posts. Please refresh the page.</p>
            `;
        });
    }

  // Initialize when DOM is loaded
  document.addEventListener('DOMContentLoaded', initializeBlogDisplay);
</script>
  <button id="backToTop" title="Go to top">â†‘</button>
    
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-section">
                <img src="images/Logo.png" alt="QuietShelter Logo" class="footer-logo">
                <div class="social-links">
                  <a href="https://www.facebook.com/quietshelterfoundation"><i class="fab fa-facebook-f"></i></a>
                  <a href="https://www.instagram.com/quietshelterfoundation"><i class="fab fa-instagram"></i></a>
                  <a href="https://www.linkedin.com/in/quite-shelter-empowerment-foundation-3a85a3312"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>

            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul class="footer-nav">
                    <li><a href="careers.html">Careers</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="about.html">Our Story</a></li>
                    <li><a href="donation.html">Donation</a></li>
                </ul>
            </div>

            <div class="footer-section">
              <h3>Quick Links</h3>
              <ul class="footer-nav">
                  <li><a href="#faq.html">FAQ</a></li>
                  <li><a href="#ad.html">Advocacy Programs</a></li>
                  <li><a href="#sem.html">Seminars</a></li>
                  <li><a href="#part.html">Partners</a></li>
              </ul>
            </div>

            <div class="footer-section">
                <h3>Take Action</h3>
                <div class="footer-buttons">
                    <button class="btn btn-donate" onclick="window.location.href='donation.html'">
                        Donate Now
                    </button>
                    <button class="btn btn-subscribe" onclick="openModal()">
                        Subscribe to Newsletter
                    </button>
                </div>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2025 QuietShelter Empowerment Foundation | All Rights Reserved</p>
            <p>No 2A, Gibson Jalo Crescent, beside Government House Dougirei, Yola North, Adamawa State.</p>
        </div>
    </footer>

    <!-- Subscribe Modal -->
    <div id="subscribeModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal()">&times;</span>
            <h2>Subscribe to our Newsletter</h2>
            <form class="subscribe-form" id="subscribeForm">
                <input type="email" placeholder="Enter your email" required>
                <button type="submit">Subscribe</button>
            </form>
        </div>
    </div>
  
  

<script src = "script.js"></Script>  
</body>

</html>
  